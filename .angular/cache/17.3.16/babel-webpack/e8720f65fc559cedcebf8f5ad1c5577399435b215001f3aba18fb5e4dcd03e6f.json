{"ast":null,"code":"import * as d3 from 'd3';\nimport * as i0 from \"@angular/core\";\nexport let TreeVisualizationService = /*#__PURE__*/(() => {\n  class TreeVisualizationService {\n    svgWidth = 928;\n    svgHeight = 500;\n    nodeWidth = 75;\n    nodeHeight = 40;\n    defaultData = {\n      name: 'Eve',\n      children: [{\n        name: 'Cain'\n      }, {\n        name: 'Seth',\n        children: [{\n          name: 'Enos'\n        }, {\n          name: 'Noam'\n        }]\n      }, {\n        name: 'Abel'\n      }, {\n        name: 'Awan',\n        children: [{\n          name: 'Enoch'\n        }]\n      }, {\n        name: 'Azura'\n      }]\n    };\n    constructor() {}\n    loadTreeData() {}\n    performActions() {}\n    getInitNode(data) {\n      if (!data) {\n        data = this.defaultData;\n      }\n      // Create hierarchy and apply tree layout\n      const root = d3.hierarchy(data);\n      // Using nodeSize sets the spacing between nodes\n      const tree = d3.tree().nodeSize([this.nodeWidth * 1.5, this.nodeHeight * 2]);\n      // Apply layout to calculate positions\n      tree(root);\n      // Create SVG\n      const svg = d3.select('.tree-visualization').append('svg').attr('width', this.svgWidth).attr('height', this.svgHeight).attr('viewBox', [0, 0, this.svgWidth, this.svgHeight]).attr('style', 'max-width: 100%; height: auto; font: 10px sans-serif;');\n      // Create a group to hold all elements with a margin\n      const g = svg.append('g').attr('transform', `translate(${this.svgWidth / 2}, ${this.nodeHeight})`);\n      // Create links first (so they appear behind nodes)\n      const links = g.selectAll('.link').data(root.links()).enter().append('path').attr('class', 'link').attr('d', d3.linkVertical().x(d => d.x) // Use natural x,y for vertical layout\n      .y(d => d.y)).style('fill', 'none').style('stroke', '#000000').style('stroke-width', '1.5px');\n      // Create node groups\n      const nodes = g.selectAll('.node').data(root.descendants()).enter().append('g').attr('class', 'node').attr('transform', d => `translate(${d.x},${d.y})`);\n      // Add rectangles to nodes - centered on node position\n      nodes.append('rect').attr('width', this.nodeWidth).attr('height', this.nodeHeight).attr('x', -this.nodeWidth / 2) // Center the rectangle on the node\n      .attr('y', -this.nodeHeight / 2) // Center the rectangle on the node\n      .style('fill', '#69b3a2').style('stroke', '#000').attr('rx', 5) // Rounded corners\n      .attr('ry', 5);\n      // Add text labels\n      nodes.append('text').attr('dy', '0.3em').attr('text-anchor', 'middle').text(d => d.data.name).style('fill', 'white').style('font-size', '12px');\n      return svg.node();\n    }\n    getLinks(data) {\n      if (!data) {\n        data = this.defaultData;\n      }\n      const root = d3.hierarchy(data);\n      const links = d3.select('.tree-visualization').select('svg').selectAll('.link').data(root.links()).enter().append('path').attr('class', 'link').attr('d', d3.linkVertical().x(d => d.x).y(d => d.y)).style('fill', 'none').style('stroke', '#000000').style('stroke-width', '1.5px');\n      return links;\n    }\n    static ɵfac = function TreeVisualizationService_Factory(t) {\n      return new (t || TreeVisualizationService)();\n    };\n    static ɵprov = (() => /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: TreeVisualizationService,\n      factory: TreeVisualizationService.ɵfac\n    }))();\n  }\n  return TreeVisualizationService;\n})();","map":{"version":3,"names":["d3","TreeVisualizationService","svgWidth","svgHeight","nodeWidth","nodeHeight","defaultData","name","children","constructor","loadTreeData","performActions","getInitNode","data","root","hierarchy","tree","nodeSize","svg","select","append","attr","g","links","selectAll","enter","linkVertical","x","d","y","style","nodes","descendants","text","node","getLinks","factory","ɵfac"],"sources":["/Users/reynolds/cursor/d3js_example2/angular8-app/src/app/services/tree-visualization-service.ts"],"sourcesContent":["import {ElementRef, Injectable} from '@angular/core';\nimport * as d3 from 'd3';\nimport {TreeNode, TreeState} from '../interfaces/interfaces';\nimport {Selection} from 'd3-selection';\nimport {HierarchyNode} from 'd3-hierarchy';\n\n@Injectable()\nexport class TreeVisualizationService {\n\n  public svgWidth = 928;\n  public svgHeight = 500;\n  public nodeWidth = 75;\n  public nodeHeight = 40;\n\n  defaultData: TreeNode = {\n    name: 'Eve',\n    children: [\n      {name: 'Cain'},\n      {name: 'Seth', children: [{name: 'Enos'}, {name: 'Noam'}]},\n      {name: 'Abel'},\n      {name: 'Awan', children: [{name: 'Enoch'}]},\n      {name: 'Azura'}\n    ]\n  };\n\n  constructor() {\n  }\n\n  public loadTreeData(): void {}\n\n  public performActions(): void {}\n\n  public getInitNode(data: TreeNode | undefined) {\n    if (!data) {\n      data = this.defaultData;\n    }\n\n    // Create hierarchy and apply tree layout\n    const root = d3.hierarchy(data) as HierarchyNode<unknown>;\n\n    // Using nodeSize sets the spacing between nodes\n    const tree = d3.tree().nodeSize([this.nodeWidth * 1.5, this.nodeHeight * 2]);\n\n    // Apply layout to calculate positions\n    tree(root);\n\n    // Create SVG\n    const svg = d3.select('.tree-visualization')\n      .append('svg')\n      .attr('width', this.svgWidth)\n      .attr('height', this.svgHeight)\n      .attr('viewBox', [0, 0, this.svgWidth, this.svgHeight])\n      .attr('style', 'max-width: 100%; height: auto; font: 10px sans-serif;');\n\n    // Create a group to hold all elements with a margin\n    const g = svg.append('g')\n      .attr('transform', `translate(${this.svgWidth / 2}, ${this.nodeHeight})`);\n\n    // Create links first (so they appear behind nodes)\n    const links = g.selectAll('.link')\n      .data(root.links())\n      .enter()\n      .append('path')\n      .attr('class', 'link')\n      .attr('d', d3.linkVertical()\n        .x((d:any) => d.x)  // Use natural x,y for vertical layout\n        .y((d:any) => d.y) as any)\n      .style('fill', 'none')\n      .style('stroke', '#000000')\n      .style('stroke-width', '1.5px');\n\n    // Create node groups\n    const nodes = g.selectAll('.node')\n      .data(root.descendants())\n      .enter()\n      .append('g')\n      .attr('class', 'node')\n      .attr('transform', d => `translate(${d.x},${d.y})`);\n\n    // Add rectangles to nodes - centered on node position\n    nodes.append('rect')\n      .attr('width', this.nodeWidth)\n      .attr('height', this.nodeHeight)\n      .attr('x', -this.nodeWidth / 2)  // Center the rectangle on the node\n      .attr('y', -this.nodeHeight / 2) // Center the rectangle on the node\n      .style('fill', '#69b3a2')\n      .style('stroke', '#000')\n      .attr('rx', 5) // Rounded corners\n      .attr('ry', 5);\n\n    // Add text labels\n    nodes.append('text')\n      .attr('dy', '0.3em')\n      .attr('text-anchor', 'middle')\n      .text(d => (d.data as TreeNode).name)\n      .style('fill', 'white')\n      .style('font-size', '12px');\n\n    return svg.node();\n  }\n\n  getLinks(data: TreeNode | undefined) {\n    if (!data) {\n      data = this.defaultData;\n    }\n    const root = d3.hierarchy(data);\n    const links =\n      d3.select('.tree-visualization')\n        .select('svg')\n        .selectAll('.link')\n      .data(root.links())\n        .enter()\n      .append('path')\n      .attr('class', 'link')\n      .attr('d', d3.linkVertical()\n        .x((d: any) => d.x)\n        .y((d: any) => d.y) as any)\n      .style('fill', 'none')\n      .style('stroke', '#000000')\n      .style('stroke-width', '1.5px');\n\n    return links;\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}